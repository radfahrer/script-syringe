name: Checks and Balances
on: 
    pull_request:
        branches:
            '*'
jobs:
    checkout:
        name: Check Out Code
        runs-on: ubuntu-latest
        steps:
            - uses: actions/checkout@v2

    install:
        name: Install
        runs-on: ubuntu-latest
        needs: ['checkout']
        steps:
            - run: 'npm install'

    test:
        name: Run Tests
        runs-on: ubuntu-latest
        needs: ['install']
        steps: 
            - run: 'npm test -- --coverage'
    report:
        name: Report Test Resuts
        runs-on: ubuntu-latest
        needs: ['test']
        steps: 
            - name: Send Coverage to Code Climate
              uses: paambaati/codeclimate-action@v2.7.5
              env:
                CC_TEST_REPORTER_ID: ${{ secrets.CODE_CLIMATE_KEY }}
              with:
                  debug: true
